apiVersion: deployments.plural.sh/v1alpha1
kind: PrAutomation
metadata:
  name: airbyte-creator
spec:
  name: airbyte-creator
  documentation: |
    Deploys airbyte to the cluster
  title: "Deploying airbyte to the cluster: {{ context.name }}"
  message: "Deploying airbyte to the cluster cluster {{ context.name }} with Plural"
  identifier: pluralsh/scaffolds
  catalogRef:
    name: data
    namespace: infra
  creates:
    templates:
      - source: catalogs/data/airbyte/servicedeployment.yaml.liquid
        destination: apps/services/airbyte/servicedeployment.yaml
        external: true
      - source: catalogs/data/airbyte/helm/values.yaml.liquid
        destination: helm/airbyte/{{ context.name }}.yaml.liquid
        external: true
  scmConnectionRef:
    name: github
  configuration:
    - name: name
      type: STRING
      documentation: name of the cluster to deploy airbyte to

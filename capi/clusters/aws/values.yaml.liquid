cluster:
  name: {{ configuration.clusterName }}
  kubernetesVersion: {{ configuration.version }}
  aws:
    region: {{ configuration.region }}

{% if workers and workers.size != 0 -%}
workers:
  groups:
    {%- for worker in workers %}
    {{ worker.name }}:
      isMultiAZ: true
      spec:
        instanceType: {{ worker.instance_type }}
        scaling:
          maxSize: {{ worker.max_size }}
          minSize: {{ worker.min_size }}
        {% if worker.spot -%}
        capacityType: spot
        {% endif -%}
        {% if worker.labels -%}
        labels: {{ worker.labels | json}}
        {% else %}
        labels: { }
        {% endif -%}
        {% if worker.taints and worker.taints.size != 0 -%}
        taints:
        {% for taint in worker.taints -%}
        - key: {{ taint.key }}
          value: {{ taint.value }}
          effect: {{ taint.effect }}
        {% endfor -%}
        {% endif -%}
    {% endfor -%}
{% endif -%}
